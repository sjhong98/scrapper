(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{8883:function(e,t,s){Promise.resolve().then(s.bind(s,6075))},6075:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Scrap}});var a=s(7437),n=s(2265),l=s(4033),o=s(994),r=s(2303),c=s(8333),i=s(4174),p=s(4086);function Scrap(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[d,u]=(0,n.useState)(-1),[h,x]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1),[g,b]=(0,n.useState)(""),[k,S]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1),C=(0,o.ZF)({apiKey:"AIzaSyB0wNhng69y2_dkHsPjN1k579LeYrSQWdU",authDomain:"scrapper-9558b.firebaseapp.com",databaseURL:"https://scrapper-9558b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"scrapper-9558b",storageBucket:"scrapper-9558b.appspot.com",messagingSenderId:"241265284136",appId:"1:241265284136:web:253ec9f008e31a3d03911d"}),N=(0,p.ad)(C);(0,n.useEffect)(()=>{S(sessionStorage.getItem("scrapper-login")),getContentFromDb()},[]);let getContentFromDb=async()=>{let e=sessionStorage.getItem("scrapper-login"),t=[];await (0,p.QT)((0,p.JU)(N,"accounts",e)).then(e=>{t=e.data().scrap});let a=(0,p.IO)((0,p.hJ)(N,"posts"),(0,p.Xo)("time","desc"));await (0,p.PL)(a).then(e=>{let a=[];e.forEach(e=>{let s=e.data();for(let n=0;n<t.length;n++)if(e.id===t[n]){s.postId=e.id,a.push(s);break}}),s(a)})},uploadLikes=(e,t)=>{let s=(0,p.JU)(N,"posts",e);(0,p.r7)(s,{likes:t}),getContentFromDb()},handleTextSelection=()=>{let e,s,a;console.log(t);let n=t.find(e=>e.postId===g),l=window.getSelection();if(l&&l.rangeCount>0){let t=l.getRangeAt(0),a=t.toString();s=(e=n.msg.indexOf(a))+a.length-1}let o="";for(let t=0;t<e;t++)o+=n.msg[t];let r=0,c=o.match(/\\n/g);null!==c&&(r=c.length),r>0&&(e-=r,void 0!==s&&(s-=r)),void 0!==s&&(a=s-e);let i=e;if(void 0!==a)for(let e=0;e<a+1;e++)n.likes=n.likes+i.toString()+" ",i++;uploadLikes(g,n.likes)};return(0,a.jsxs)("div",{className:"h-auto min-h-screen w-screen bg-white flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{className:"h-1/6 w-1/2 flex justify-center items-center fixed top-0 z-40",children:(0,a.jsx)("p",{className:"tracking-[-5px] text-black text-8xl border-r-4 border-black pr-[15px] ",style:{fontFamily:"lemon-r"},children:"SCRAPPER"})}),(0,a.jsxs)("div",{className:"right-0 mr-12 mt-12 opacity-1 fixed top-0 cursor-pointer flex flex-col",style:{zIndex:9999},children:[(0,a.jsx)(c.Z,{onClick:()=>e.push("/posts"),onMouseOver:()=>x(!0),onMouseLeave:()=>x(!1),className:h?"scale-up":"scale-down",sx:{fontSize:50,color:"black"}}),(0,a.jsx)(r.Z,{onClick:()=>e.push("/"),onMouseOver:()=>m(!0),onMouseLeave:()=>m(!1),className:f?"scale-up":"scale-down",sx:{fontSize:50,color:"black",marginTop:"3vh"}}),(0,a.jsx)(i.Z,{onClick:()=>e.push("/scrap"),onMouseOver:()=>j(!0),onMouseLeave:()=>j(!1),className:v?"scale-up":"scale-down",sx:{fontSize:50,color:"black",marginTop:"3vh"}})]}),(0,a.jsxs)("div",{className:"w-5/6 h-screen",children:[(0,a.jsx)("div",{className:"h-1/5"}),(0,a.jsx)("div",{className:"h-auto flex flex-col justify-center items-center",children:t.map((t,s)=>{let n=t.msg.replace(/\\n/g,"\n"),l=[],o=t.likes.split(" ");for(let e=0;e<n.length;e++)l[e]=0;for(let e=0;e<o.length;e++)l[o[e]]=l[o[e]]+1;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-black text-center mt-12",children:t.user}),(0,a.jsx)("p",{onMouseOver:()=>{u(s),b(t.postId)},onMouseLeave:()=>u(-1),onClick:()=>e.push("/board/".concat(t.user)),style:{whiteSpace:"pre-wrap"},className:s===d?"leading-[38px] text-black font-extralight p-3 mt-2 text-[20px] text-center rounded-md line-highlight":"leading-[38px] text-black font-extralight text-[20px] p-3 mt-2 text-center rounded-md line-un-highlight",children:n.split("").map((e,t)=>{let s;return s=l[t]>8?"#A6A6A6":l[t]>=7?"#ADADAD":l[t]>=6?"#B5B5B5":l[t]>=5?"#BFBFBF":l[t]>=4?"#CCCCCC":l[t]>=3?"#D9D9D9":l[t]>=2?"#E6E6E6":l[t]>=1?"#F2F2F2":"#FFF",(0,a.jsx)("span",{onMouseUp:handleTextSelection,className:"text-black",style:{backgroundColor:s,userSelect:"text"},children:e},t)})},s)]},s)})})]})]})}s(2276)},2276:function(){}},function(e){e.O(0,[358,650,136,971,864,744],function(){return e(e.s=8883)}),_N_E=e.O()}]);