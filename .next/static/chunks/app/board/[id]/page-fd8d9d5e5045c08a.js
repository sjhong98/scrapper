(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{5183:function(e,t,s){Promise.resolve().then(s.bind(s,5828))},5828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Board}});var a=s(7437),l=s(2265),n=s(4033),r=s(994),o=s(2303),c=s(8333),i=s(4174),u=s(4086);function Board(e){let t=(0,l.useRef)(null),s=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useRef)(null),h=(0,n.useRouter)(),[x,m]=(0,l.useState)(""),[g,b]=(0,l.useState)([]),[k,v]=(0,l.useState)(-1),[S,w]=(0,l.useState)([]),[j,C]=(0,l.useState)(e.params.id),[N,y]=(0,l.useState)(""),[F,I]=(0,l.useState)([]),[L,B]=(0,l.useState)(!1),[D,E]=(0,l.useState)(!1),[M,A]=(0,l.useState)(!1),O=(0,r.ZF)({apiKey:"AIzaSyB0wNhng69y2_dkHsPjN1k579LeYrSQWdU",authDomain:"scrapper-9558b.firebaseapp.com",databaseURL:"https://scrapper-9558b-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"scrapper-9558b",storageBucket:"scrapper-9558b.appspot.com",messagingSenderId:"241265284136",appId:"1:241265284136:web:253ec9f008e31a3d03911d"}),R=(0,u.ad)(O);(0,l.useEffect)(()=>{let t=0,a=e.params.id[0]+e.params.id,l=setInterval(()=>{t<a.length-1?(m(e=>e+a[t]),t++):clearInterval(l)},120);return s.current&&s.current.classList.add("textarea-show-up"),d.current&&d.current.classList.add("textarea-show-up"),getContentFromDb(),()=>{clearInterval(l)}},[]),(0,l.useEffect)(()=>{F&&b(F&&[...F].reverse())},[F]);let getContentFromDb=async()=>{let e=(0,u.IO)((0,u.hJ)(R,"posts"),(0,u.Xo)("time","desc"));await (0,u.PL)(e).then(e=>{let t=[];e.forEach(e=>{let s=e.data();s.user===j&&(s.postId=e.id,t.push(s))}),w(t)})},uploadLikes=(e,t)=>{console.log(e,t);let s=(0,u.JU)(R,"posts",e);(0,u.r7)(s,{likes:t}),getContentFromDb()},handleTextSelection=()=>{let e,t,s;console.log(S);let a=S.find(e=>e.postId===N),l=window.getSelection();if(l&&l.rangeCount>0){let s=l.getRangeAt(0),n=s.toString();t=(e=a.msg.indexOf(n))+n.length-1}let n="";for(let t=0;t<e;t++)n+=a.msg[t];let r=0,o=n.match(/\\n/g);null!==o&&(r=o.length),r>0&&(e-=r,void 0!==t&&(t-=r)),void 0!==t&&(s=t-e);let c=e;if(void 0!==s)for(let e=0;e<s+1;e++)a.likes=a.likes+c.toString()+" ",c++;uploadLikes(N,a.likes)};return(0,a.jsxs)("div",{className:"h-auto min-h-screen w-screen bg-white flex flex-col justify-center items-center",children:[(0,a.jsx)("div",{className:"h-1/6 w-1/2 flex justify-center items-center fixed top-0 z-40",children:(0,a.jsx)("p",{className:"tracking-[-5px] text-black text-8xl border-r-4 border-black pr-[15px] cursor-pointer",style:{fontFamily:"lemon-r"},children:x})}),(0,a.jsxs)("div",{className:"right-0 mr-12 mt-12 opacity-0 fixed top-0 cursor-pointer flex flex-col",style:{zIndex:9999},ref:d,children:[(0,a.jsx)(c.Z,{ref:p,onClick:()=>h.push("/posts"),onMouseOver:()=>B(!0),onMouseLeave:()=>B(!1),className:L?"scale-up":"scale-down",sx:{fontSize:50,color:"black"}}),(0,a.jsx)(o.Z,{ref:f,onClick:()=>h.push("/"),onMouseOver:()=>E(!0),onMouseLeave:()=>E(!1),className:D?"scale-up":"scale-down",sx:{fontSize:50,color:"black",marginTop:"3vh"}}),(0,a.jsx)(i.Z,{onClick:()=>h.push("/scrap"),onMouseOver:()=>A(!0),onMouseLeave:()=>A(!1),className:M?"scale-up":"scale-down",sx:{fontSize:50,color:"black",marginTop:"3vh"}})]}),(0,a.jsx)("div",{ref:s,className:"w-screen flex flex-col mt-60 justify-center items-center absolute transform translate-y-16 opacity-0 overflow-hidden",children:(0,a.jsx)("div",{className:"w-5/6 mt-32 h-screen flex flex-col items-center",children:S.map((e,s)=>{let l=e.msg.replace(/\\n/g,"\n"),n=[],r=e.likes.split(" ");for(let e=0;e<l.length;e++)n[e]=0;for(let e=0;e<r.length;e++)n[r[e]]=n[r[e]]+1;return(0,a.jsx)("p",{ref:t,onMouseOver:()=>{v(s),y(e.postId)},onMouseLeave:()=>v(-1),style:{whiteSpace:"pre-wrap"},className:s===k?"leading-[38px] text-black font-extralight p-3 mt-2 text-[20px] text-center rounded-md line-highlight":"leading-[38px] text-black font-extralight text-[20px] p-3 mt-2 text-center rounded-md line-un-highlight",children:l.split("").map((e,t)=>{let s;return s=n[t]>8?"#A6A6A6":n[t]>=7?"#ADADAD":n[t]>=6?"#B5B5B5":n[t]>=5?"#BFBFBF":n[t]>=4?"#CCCCCC":n[t]>=3?"#D9D9D9":n[t]>=2?"#E6E6E6":n[t]>=1?"#F2F2F2":"#FFF",(0,a.jsx)("span",{onMouseUp:handleTextSelection,className:"text-black",style:{backgroundColor:s,userSelect:"text"},children:e},t)})},s)})})})]})}s(2276)},2276:function(){}},function(e){e.O(0,[358,650,136,971,864,744],function(){return e(e.s=5183)}),_N_E=e.O()}]);